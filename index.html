<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è–‡è–‡å®‰çš„è³‡ç”¢å„€è¡¨æ¿</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: #f0f2f6; color: #31333F; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        h1 { color: #FF4B4B; text-align: center; }
        h2 { border-bottom: 2px solid #f0f2f6; padding-bottom: 10px; margin-top: 30px; color: #555; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .card { background: #f8f9fa; padding: 15px; border-radius: 10px; border: 1px solid #e9ecef; }
        .card label { display: block; font-size: 0.9em; color: #666; margin-bottom: 5px; font-weight: bold; }
        .card input { width: 90%; padding: 8px; border: 1px solid #ddd; border-radius: 5px; font-size: 1em; }
        .result-box { background: #e8f4ea; padding: 20px; border-radius: 10px; text-align: center; margin-top: 20px; }
        .result-value { font-size: 2.5em; font-weight: bold; color: #008000; margin: 10px 0; }
        .warning { color: #d32f2f; font-size: 0.9em; margin-top: 5px; }
        .btn { display: block; width: 100%; padding: 15px; background: #FF4B4B; color: white; border: none; border-radius: 8px; font-size: 1.2em; cursor: pointer; margin-top: 20px; }
        .btn:hover { background: #ff3333; }
        .summary-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; text-align: center; }
        .summary-item { background: #fff; padding: 10px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ’ è–‡è–‡å®‰çš„è³‡ç”¢é ˜èˆªå“¡</h1>
    <p style="text-align: center; color: #666;">ç´”ç¶²é ç‰ˆ - æ•¸æ“šè‡ªå‹•å„²å­˜åœ¨ç€è¦½å™¨ä¸­</p>

    <div class="grid">
        <div class="card">
            <label>ğŸ‡ºğŸ‡¸ ç¾é‡‘åŒ¯ç‡</label>
            <input type="number" id="usd_rate" value="32.5" step="0.1">
        </div>
        <div class="card">
            <label>ğŸ“ˆ é ä¼°å¹´å ±é…¬ (%)</label>
            <input type="number" id="growth_rate" value="6.0" step="0.5">
        </div>
    </div>

    <h2>1. è‚¡ç¥¨èˆ‡åŸºé‡‘ (ç”ŸéŒ¢çš„éµ)</h2>
    <div class="grid">
        <div class="card">
            <label>0050 å¸‚å€¼ (TWD)</label>
            <input type="number" id="stock_0050" value="2961">
        </div>
        <div class="card">
            <label>QQQM å¸‚å€¼ (USD)</label>
            <input type="number" id="stock_qqqm" value="0">
        </div>
        <div class="card">
            <label>VTI å¸‚å€¼ (USD)</label>
            <input type="number" id="stock_vti" value="160">
        </div>
        <div class="card">
            <label>è‡ªé¸å°è‚¡åˆè¨ˆ (TWD)</label>
            <input type="number" id="stock_custom" value="0">
        </div>
    </div>

    <h2>2. ç¾é‡‘ & éš±è—è³‡ç”¢</h2>
    <div class="grid">
        <div class="card">
            <label>ğŸ’° éŠ€è¡Œç¸½é¤˜é¡ (å…¨éƒ¨)</label>
            <input type="number" id="cash_total" value="1369541">
        </div>
        <div class="card">
            <label>ğŸ“¦ ä¿å–®+å›¤è²¨åƒ¹å€¼</label>
            <input type="number" id="other_assets" value="0">
        </div>
        <div class="card" style="background-color: #fff0f0;">
            <label>ğŸš« æš«å­˜å…¬æ¬¾ (è¦æ‰£æ‰)</label>
            <input type="number" id="client_funds" value="0">
        </div>
    </div>

    <h2>3. è² å‚µç®¡ç†</h2>
    <div class="grid">
        <div class="card">
            <label>ä¿¡è²¸å‰©é¤˜æœ¬é‡‘</label>
            <input type="number" id="debt" value="1950000">
        </div>
        <div class="card">
            <label>æ¯æœˆé‚„æ¬¾é‡‘é¡</label>
            <input type="number" id="monthly_pay" value="26550" readonly>
        </div>
    </div>

    <button class="btn" onclick="calculate()">ğŸ”„ æ›´æ–°è¨ˆç®—</button>

    <div class="result-box">
        <div>å¦³ç›®å‰çš„æ·¨è³‡ç”¢ (èº«åƒ¹)</div>
        <div class="result-value" id="net_worth_display">$0</div>
        <div id="assets_ratio" style="color: #666;"></div>
    </div>

    <div class="summary-grid">
        <div class="summary-item">
            <div style="font-size: 0.8em; color: #888;">ç¸½è³‡ç”¢ (æ‰£å…¬æ¬¾å¾Œ)</div>
            <div id="total_assets_display" style="font-weight: bold; font-size: 1.2em;">$0</div>
        </div>
        <div class="summary-item">
            <div style="font-size: 0.8em; color: #888;">ç¸½è² å‚µ</div>
            <div id="total_debt_display" style="font-weight: bold; font-size: 1.2em; color: #d32f2f;">$0</div>
        </div>
    </div>

    <h2>ğŸ”® ä¸€å¹´å¾Œé æ¸¬</h2>
    <div class="card">
        <p>å¦‚æœä¹–ä¹–é‚„æ¬¾ + è‚¡ç¥¨æ­£å¸¸ç™¼æ®ï¼š</p>
        <div style="font-size: 1.5em; font-weight: bold; color: #2e7d32;" id="future_net_worth">$0</div>
        <p style="font-size: 0.9em; color: #555;">(è³‡ç”¢è®ŠåŒ–ï¼š<span id="wealth_change"></span>)</p>
    </div>
</div>

<script>
    // é€™è£¡æ˜¯ç”¨ JavaScript å¯«çš„è¨ˆç®—é‚è¼¯ï¼Œå–ä»£åŸæœ¬çš„ Python
    function calculate() {
        // 1. æŠ“å–æ•¸å€¼
        let rate = parseFloat(document.getElementById('usd_rate').value) || 32.5;
        let growth = parseFloat(document.getElementById('growth_rate').value) || 6;
        
        let s1 = parseFloat(document.getElementById('stock_0050').value) || 0;
        let s2 = parseFloat(document.getElementById('stock_qqqm').value) || 0;
        let s3 = parseFloat(document.getElementById('stock_vti').value) || 0;
        let s4 = parseFloat(document.getElementById('stock_custom').value) || 0;
        
        let cash = parseFloat(document.getElementById('cash_total').value) || 0;
        let other = parseFloat(document.getElementById('other_assets').value) || 0;
        let client = parseFloat(document.getElementById('client_funds').value) || 0;
        
        let debt = parseFloat(document.getElementById('debt').value) || 0;
        let monthly = 26550;

        // 2. è¨ˆç®—ç›®å‰ç‹€æ…‹
        let stock_total = s1 + (s2 * rate) + (s3 * rate) + s4;
        let real_cash = cash - client; // æ‰£æ‰å…¬æ¬¾
        let total_assets = stock_total + real_cash + other;
        let net_worth = total_assets - debt;

        // 3. é¡¯ç¤ºç›®å‰ç‹€æ…‹
        document.getElementById('net_worth_display').innerText = "$" + net_worth.toLocaleString('zh-TW', {maximumFractionDigits: 0});
        document.getElementById('total_assets_display').innerText = "$" + total_assets.toLocaleString('zh-TW', {maximumFractionDigits: 0});
        document.getElementById('total_debt_display').innerText = "$" + debt.toLocaleString('zh-TW', {maximumFractionDigits: 0});
        
        let ratio = (net_worth / total_assets) * 100;
        document.getElementById('assets_ratio').innerText = "è³‡ç”¢è‡ªæœ‰ç‡: " + ratio.toFixed(1) + "%";

        // 4. è¨ˆç®—ä¸€å¹´å¾Œ
        // è‚¡ç¥¨å¢é•·
        let future_stock_old = stock_total * (1 + growth/100);
        let monthly_invest_vti = 160 * rate;
        let future_stock_new = (monthly_invest_vti * 12) * (1 + growth/100/2);
        let future_stock_total = future_stock_old + future_stock_new;

        // è² å‚µæ¸›å°‘ (ç²—ä¼°åˆ©æ¯3.5%)
        let yearly_pay = monthly * 12;
        let interest = debt * 0.035; 
        let principal_paid = yearly_pay - interest;
        let future_debt = debt - principal_paid;

        // ç¾é‡‘æ¸›å°‘
        let cash_out = yearly_pay + (monthly_invest_vti * 12);
        let future_cash = real_cash - cash_out;

        // æœªä¾†æ·¨å€¼
        let future_assets = future_stock_total + future_cash + other;
        let future_net = future_assets - future_debt;
        let diff = future_net - net_worth;

        document.getElementById('future_net_worth').innerText = "$" + future_net.toLocaleString('zh-TW', {maximumFractionDigits: 0});
        let sign = diff >= 0 ? "+" : "";
        document.getElementById('wealth_change').innerText = sign + "$" + diff.toLocaleString('zh-TW', {maximumFractionDigits: 0});
        
        // ä¿å­˜æ•¸æ“šåˆ°ç€è¦½å™¨ï¼Œä¸‹æ¬¡æ‰“é–‹é‚„åœ¨
        saveData();
    }

    function saveData() {
        const inputs = document.querySelectorAll('input');
        inputs.forEach(input => {
            localStorage.setItem(input.id, input.value);
        });
    }

    function loadData() {
        const inputs = document.querySelectorAll('input');
        inputs.forEach(input => {
            const val = localStorage.getItem(input.id);
            if (val) input.value = val;
        });
        calculate();
    }

    // å•Ÿå‹•æ™‚è®€å–æ•¸æ“š
    window.onload = loadData;
</script>

</body>
</html>
